- Resolved style values:
//   windowNoTitle = true
//   windowActionBar = false

- Screen: DeletedMedicinesActivity
- Layout: activity_deleted_medicines.xml

- XML Layout:
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- Top App Bar -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/deleted_toolbar"
        android:layout_width="match_parent"
        android:layout_height="?attr/actionBarSize"
        android:background="?attr/colorPrimary"
        android:title="Deleted Medicines"
        android:titleTextColor="@android:color/white"
        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar" />

    <!-- RecyclerView that shows deleted medicine cards -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/deleted_recycler_view"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:padding="8dp" />

    <!-- Empty state message -->
    <TextView
        android:id="@+id/empty_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="No deleted medicines."
        android:textAppearance="@style/TextAppearance.AppCompat.Medium"
        android:textColor="@android:color/darker_gray"
        android:gravity="center"
        android:padding="16dp"
        android:visibility="gone"/>
</LinearLayout>


- Associated Layout Files & Full XML:
  (1) row_medicine.xml:
```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:orientation="vertical"
    app:cardElevation="2dp"
    app:cardUseCompatPadding="true">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <!-- Time block -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingBottom="@dimen/sixteen_dp"
            android:paddingLeft="@dimen/sixteen_dp"
            android:paddingRight="@dimen/sixteen_dp"
            android:paddingTop="@dimen/sixteen_dp">

            <com.vishwajeeth.medicinetime.views.RobotoBoldTextView
                android:id="@+id/tv_med_time"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                tools:text="23:20"
                android:textColor="#4d4d4d"
                android:textSize="30sp" />
        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="#E0E0E0" />

        <!-- Medicine info block -->
        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:paddingBottom="@dimen/eight_dp"
            android:paddingLeft="@dimen/sixteen_dp"
            android:paddingRight="@dimen/sixteen_dp"
            android:paddingTop="@dimen/eight_dp">

            <!-- Medicine icon -->
            <ImageView
                android:id="@+id/iv_icon"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentStart="true"
                android:layout_centerVertical="true"
                android:contentDescription="@null"
                android:src="@drawable/icon_blister" />

            <!-- Name + Dose block -->
            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toEndOf="@+id/iv_icon"
                android:layout_toStartOf="@+id/iv_alarm_delete"
                android:orientation="vertical"
                android:padding="4dp">

                <com.vishwajeeth.medicinetime.views.RobotoBoldTextView
                    android:id="@+id/tv_medicine_name"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:textColor="#4d4d4d"
                    tools:text="Paracetamol" />

                <com.vishwajeeth.medicinetime.views.RobotoRegularTextView
                    android:id="@+id/tv_dose_details"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    tools:text="1.0 adhesive(s)" />
            </LinearLayout>

            <!-- NEW: Medicine action icon (e.g., reminder taken) -->
            <ImageView
                android:id="@+id/iv_medicine_action"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentEnd="true"
                android:layout_marginTop="4dp"
                android:layout_centerVertical="true"
                android:src="@drawable/image_reminder_taken"
                android:visibility="gone"
                android:contentDescription="@null" />

            <!-- Delete icon -->
            <ImageView
                android:id="@+id/iv_alarm_delete"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentEnd="true"
                android:layout_below="@id/iv_medicine_action"
                android:layout_marginTop="4dp"
                android:contentDescription="@null"
                android:visibility="gone"
                android:src="@drawable/image_reminder_not_taken" />

            <!-- Restore icon -->
            <ImageView
                android:id="@+id/iv_restore"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentEnd="true"
                android:layout_below="@id/iv_alarm_delete"
                android:layout_marginTop="4dp"
                android:contentDescription="Restore"
                android:visibility="gone"
                android:src="@android:drawable/ic_menu_revert" />
        </RelativeLayout>
    </LinearLayout>
</androidx.cardview.widget.CardView>
```

- Associated Menus & Full XML:
    (none)

- Resolved Attributes:
    (none)

- Source (DeletedMedicinesActivity.java):
package com.vishwajeeth.medicinetime.medicine;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.vishwajeeth.medicinetime.R;
import com.vishwajeeth.medicinetime.data.source.MedicineAlarm;

import java.util.List;

public class DeletedMedicinesActivity extends AppCompatActivity implements MedicineAdapter.OnItemClickListener {

    public static List<MedicineAlarm> deletedMedicinesList;
    private MedicineAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_deleted_medicines);

        Toolbar toolbar = findViewById(R.id.deleted_toolbar);
        setSupportActionBar(toolbar);
        if (getSupportActionBar() != null) {
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        }

        RecyclerView recyclerView = findViewById(R.id.deleted_recycler_view);
        TextView emptyText = findViewById(R.id.empty_text);

        if (deletedMedicinesList == null || deletedMedicinesList.isEmpty()) {
            emptyText.setVisibility(View.VISIBLE);
            recyclerView.setVisibility(View.GONE);
        } else {
            recyclerView.setLayoutManager(new LinearLayoutManager(this));
            adapter = new MedicineAdapter(deletedMedicinesList, true);
            adapter.setOnItemClickListener(this); // ✅ Set the click listener!
            recyclerView.setAdapter(adapter);
            recyclerView.setVisibility(View.VISIBLE);
            emptyText.setVisibility(View.GONE);
        }
    }

    @Override
    public boolean onSupportNavigateUp() {
        finish();
        return true;
    }

    // ✅ Implement the delete action if needed
    @Override
    public void onMedicineDeleteClicked(MedicineAlarm medicineAlarm) {
        // No-op or optional: delete from deleted list?
    }

    // ✅ Restore logic
    @Override
    public void onMedicineRestoreClicked(MedicineAlarm medicineAlarm) {
        if (deletedMedicinesList != null) {
            deletedMedicinesList.remove(medicineAlarm);
            MedicineActivity.addRestoredMedicine(medicineAlarm);
            adapter.replaceData(deletedMedicinesList);  // Refresh deleted UI
        }
    }


}

- Related code:
    // from MedicineAdapter.java: MedicineAdapter
    // Update constructor to accept a boolean as well
    public MedicineAdapter(List<MedicineAlarm> medicineAlarmList, boolean isDeletedUI) {
        this.medicineAlarmList = medicineAlarmList;
        // Set whether this is the deleted UI or not
        this.isDeletedUI = isDeletedUI;
    }
    
    // from MedicineAdapter.java: setOnItemClickListener
    public void setOnItemClickListener(OnItemClickListener onItemClickListener) {
        this.onItemClickListener = onItemClickListener;
    }
    
    // from MedicineActivity.java: addRestoredMedicine
    public static void addRestoredMedicine(MedicineAlarm restoredAlarm) {
        if (instance != null && instance.presenter != null) {
            // Reset ID so it's treated as a new item
            restoredAlarm.setId(0);
            // ✅ Set only today = true in dayOfWeek[]
            boolean[] days = new boolean[7];
            // Calendar.SUNDAY=1, so subtract 1
            int todayIndex = Calendar.getInstance().get(Calendar.DAY_OF_WEEK) - 1;
            days[todayIndex] = true;
            // <-- This is the fix!
            restoredAlarm.setDayOfWeek(days);
            // Save and refresh
            instance.presenter.saveMedicineAlarm(restoredAlarm);
        }
        // Remove from deleted list and persist
        deletedMedicines.remove(restoredAlarm);
        saveDeletedMedicines();
    }
    
    // from MedicineAdapter.java: replaceData
    public void replaceData(List<MedicineAlarm> medicineAlarmList) {
        this.medicineAlarmList = medicineAlarmList;
        notifyDataSetChanged();
    }


- Raw Evidence — Inputs (XML)
  (none)

- Raw Evidence — View Bindings
  • toolbar ⇄ R.id.deleted_toolbar
  • recyclerView ⇄ R.id.deleted_recycler_view
  • emptyText ⇄ R.id.empty_text

- Clickables (XML + Code)
  (none)

- Raw Evidence — Gesture Handlers & Swipe Behaviors (screen-local)
  (none)

- Raw Evidence — Input Callsites (addTextChangedListener/setFilters/setInputType/...)
  (none)

- Raw Evidence — Search Callbacks (code)
  (none)

- Raw Evidence — Search Query Sources (verbatim SQL)
  (none)

- Raw Evidence — Filter Widgets (XML + listeners)
  (none)

- Raw Evidence — Adapter Filtering
  (none)

- Raw Evidence — Error Handling (try/catch, user-visible surfaces, guards, logs)
  • try/catch: (none)
  • error surfaces: (none)
  • guards:
    - if (getSupportActionBar() != null) @line 30
    - if (deletedMedicinesList == null || deletedMedicinesList.isEmpty()) @line 37
    - if (deletedMedicinesList != null) @line 65
  • logs: (none)
  • results/navigation:
    - finish() @line 52 in onSupportNavigateUp

- Raw Evidence — Context Signals (screen-local)
  CALL | (none)

- Raw Evidence — Guards Using Context
  COND | (none)

- Raw Evidence — Outgoing Network Calls (screen-local)
  NET | (none)

- Raw Evidence — Dynamic Feedback & State (AST)
  • dynamic:
    - setVisibility on emptyText @line 38
    - setVisibility on recyclerView @line 39
    - setVisibility on recyclerView @line 45
    - setVisibility on emptyText @line 46
    - notifyDataSetChanged on this(MedicineAdapter) @line 31
    - setText on holder.tvMedTime @line 50
    - setText on holder.tvMedicineName @line 51
    - setText on holder.tvDoseDetails @line 52
    - setVisibility on holder.ivAlarmDelete @line 56
    - setVisibility on holder.ivRestore @line 67
    - setVisibility on holder.ivRestore @line 74
    - notifyItemRemoved on this(MedicineAdapter) @line 113

- Raw Evidence — Notifications (screen-local)
  (none)

- Raw Evidence — Alert Effects (screen-local)
  (none)

- Raw Evidence — Scheduling (screen-local)
  (none)

- Control Guards for Alert Calls (screen-local)
  (none)

- Raw Evidence — SharedPreferences (screen-local)
  (none)

- Top App Bar & Menu Items (merged)
  (none)

- Lifecycle → Calls (screen-local)
  • onCreate → onCreate | at DeletedMedicinesActivity.java#?:23
  • onCreate → setContentView | at DeletedMedicinesActivity.java#?:23
  • onCreate → findViewById | at DeletedMedicinesActivity.java#?:23
  • onCreate → setSupportActionBar | at DeletedMedicinesActivity.java#?:23
  • onCreate → getSupportActionBar | at DeletedMedicinesActivity.java#?:23
  • onCreate → setDisplayHomeAsUpEnabled | at DeletedMedicinesActivity.java#?:23
  • onCreate → getSupportActionBar | at DeletedMedicinesActivity.java#?:23
  • onCreate → findViewById | at DeletedMedicinesActivity.java#?:23
  • onCreate → findViewById | at DeletedMedicinesActivity.java#?:23
  • onCreate → isEmpty | at DeletedMedicinesActivity.java#?:23
  • onCreate → android.view.View.setVisibility(int) | at DeletedMedicinesActivity.java#?:23
  • onCreate → android.view.View.setVisibility(int) | at DeletedMedicinesActivity.java#?:23
  • onCreate → androidx.recyclerview.widget.RecyclerView.setLayoutManager(androidx.recyclerview.widget.RecyclerView.LayoutManager) | at DeletedMedicinesActivity.java#?:23
  • onCreate → setOnItemClickListener | at DeletedMedicinesActivity.java#?:23
  • onCreate → setAdapter | at DeletedMedicinesActivity.java#?:23
  • onCreate → android.view.View.setVisibility(int) | at DeletedMedicinesActivity.java#?:23
  • onCreate → android.view.View.setVisibility(int) | at DeletedMedicinesActivity.java#?:23

- Actions & Intents from this screen
  (none)
